<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signin</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="signin_square">
            <div class="login_name">SelfBook</div>
            <div class="signin">
                <form id="signupForm">
                    <table>
                        <tr>
                            <td><label for="signInEmail" class="signin_menu">이메일</label></td>
                            <td><input type="email" id="signInEmail" required></td>
                        </tr>
                        <tr>
                            <td><label for="signInPassword" class="signin_menu">비밀번호</label></td>
                            <td><input type="password" id="signInPassword" required></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <button type="submit" id="signInButton">회원가입</button>
                            </td>
                        </tr>
                    </table>
                </form>
                <div class="setting">비밀번호는 6자 이상으로 설정 바랍니다.</div>
                <a href="project_login.html" class="back">Back to Login</a>
            </div>
        </div>
    </div>
</body>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-auth.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyBsC48vTn3D7sCJHkqBQ2A6wVgkax96IPg",
        authDomain: "selfbook-4ad99.firebaseapp.com",
        projectId: "selfbook-4ad99",
        storageBucket: "selfbook-4ad99.appspot.com",
        messagingSenderId: "524293661331",
        appId: "1:524293661331:web:3476ad472b7d719ce1a366"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    document.getElementById('signupForm').addEventListener('submit', async (event) => {
        event.preventDefault();
        const email = document.getElementById('signInEmail').value;
        const password = document.getElementById('signInPassword').value;
        const auth = getAuth();
        try {
            const userCredential = await createUserWithEmailAndPassword(auth, email, password);
            console.log(userCredential);
            // Signed in 
            const user = userCredential.user;
            // Further actions on success, like redirecting the user
            alert('회원가입이 성공적으로 완료되었습니다!');
        } catch (error) {
            console.error('Error:', error);
            // Handle Errors here.
            const errorCode = error.code;
            const errorMessage = error.message;
            // Display error message to the user
            if (errorCode === 'auth/email-already-in-use') {
                alert('이미 존재하는 이메일입니다.');
            } else {
                alert('이메일 혹은 비밀번호를 다시 입력해주세요.');
            }
        }
        });
</script>
</html>
